<html>
	<head>
		<title>JavaScript 9P Client</title>
		<script type="text/javascript" src="prototype.js"></script>
		<script type="text/javascript" src="../js9p.js"></script>
		<script type="text/javascript" src="xhr.js"></script>

		<script type="text/javascript">
			function doRequest() {
				var body = JS9P.XHR.stat();
				new Ajax.Request('http://localhost/js9p/xhr/listener.php',
				{
					method: 'post',
					contentType: 'application/octet-stream',
					postBody: body,
					onSuccess: function(transport) {
						var res = transport.responseText;
						var msg = eval(res);
						$('response').update(msg)
					},
					onFailure: function() {
						alert("Failure");
					}
				});
			}

			 
		</script>

	</head>
	<body>
		<a href="#" onClick="doRequest();">Do Request</a>
		<div id="response">

		</div>
	</body>
</html>
